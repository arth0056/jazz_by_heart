<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta charset="UTF-8">
        <title>Jazz By Heart | Concerts</title>
        <meta name="description" content="Vocal jazz, Country jazz, Experimental jazz. Jazz for the senses, the traditional, and the daring. Jazz By Heart is a duo who dare to span many genres.">
        <meta name="keywords" content="Vocal jazz, Country jazz, Experimental jazz">

        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,400;0,500;0,600;1,200&family=Yeseva+One&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="style.css">

    </head>

</head>

<body>

    <header>

        <div id="logo">

        </div>

        <nav>
            <a class="select" href="index.html">Home</a>
            <a href="music.html">Music</a>
            <a href="projects.html">Projects</a>
            <a href="concerts.html">Concerts</a>
            <a href="about.html">About</a>

        </nav>
    </header>

    <template id="template">
        <article class="concert_container">

            <h2 class="concert_time"></h2>
            <h2 class="band_name"></h2>
            <h2 class="concert_place"></h2>

        </article>

    </template>


    <section id="concerts">

        <img src="" alt="" class="splash_img">


        <div class="red_container">



            <div class="album_preview">


                <p class="intro_txt"> Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere architecto, fugiat commodi aut illo debitis sit, dolorum aperiam doloremque, facilis tenetur perferendis saepe consequuntur recusandae illum itaque voluptates, mollitia expedita.</p>


                <div class="album_preview_visual">

                    <button class="filter valgt" data-filter="alle">alle</button>

                    <button class="filter" data-filter="Upcoming">Upcoming</button>
                    <button class="filter" data-filter="Previous">Previous</button>


                </div>


                <div class="song_list">



                </div>

                <button class="more"> -> </button>

            </div>

        </div>






    </section>

    <footer>



    </footer>









    <script>
        let side = [];
        const URLend = "concerts"
        const endpoint = `http://yobaba.dk/kea/2sem_eks/jazz_by_heart/wordpress/wp-json/wp/v2/${URLend}`;

        let side2 = [];
        const URLend2 = "music?slug=music"
        const endpoint2 = `http://yobaba.dk/kea/2sem_eks/jazz_by_heart/wordpress/wp-json/wp/v2/${URLend2}`;



        let filter = "alle";
        const container = document.querySelector(".song_list");

        document.addEventListener("DOMContentLoaded", start);

        function start() {
            hentData();
            hentData2();

            console.log("start");

        }

        /************* script til splash billede text_container y cta ********/

        async function hentData() {
            const response = await fetch(endpoint);
            side = await response.json();
            console.log(side);
            showSongs();
            addEventToButtons();
        }

        async function hentData2() {
            const response2 = await fetch(endpoint2);
            side2 = await response2.json();
            console.log(side2);
            showElement();
        }




        function addEventToButtons() {
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);

            })
        }


        function filtrering() {

            console.log("filter", this.dataset.filter);
            filter = this.dataset.filter;
            document.querySelectorAll(".filter").forEach(elm => {
                elm.classList.remove("valgt");
            })
            this.classList.add("valgt");
            showSongs();
        }


        function showSongs() {

            console.log(side);
            container.innerHTML = "";
            const template = document.querySelector("#template");

            side.forEach(ting => {

                if (filter == "alle" || filter == ting.upcoming_previous) {


                    const clon = template.cloneNode(true).content;

                    clon.querySelector(".band_name").textContent = ting.band_name;
                    clon.querySelector(".concert_place").textContent = ting.location;


                    container.appendChild(clon);
                }
            });

        }


        function showElement() {
            side2.forEach(element => {
                document.querySelector("img").src = element.splash_img.guid;


            })

        }

    </script>

</body>

</html>
